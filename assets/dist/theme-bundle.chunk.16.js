webpackJsonp([16],{

/***/ 415:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__page_manager__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__common_state_country__ = __webpack_require__(411);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_jquery__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_nod__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_form_validation__ = __webpack_require__(412);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__common_models_forms__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__common_form_utils__ = __webpack_require__(105);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Auth=function(_PageManager){_inherits(Auth,_PageManager);function Auth(){_classCallCheck(this,Auth);var _this=_possibleConstructorReturn(this,_PageManager.call(this));_this.formCreateSelector='form[data-create-account-form]';return _this}Auth.prototype.registerLoginValidation=function registerLoginValidation($loginForm){var _this2=this;var loginModel=__WEBPACK_IMPORTED_MODULE_5__common_models_forms__["a" /* default */];this.loginValidator=Object(__WEBPACK_IMPORTED_MODULE_3__common_nod__["a" /* default */])({submit:'.login-form input[type="submit"]'});this.loginValidator.add([{selector:'.login-form input[name="login_email"]',validate:function validate(cb,val){var result=loginModel.email(val);cb(result)},errorMessage:this.context.useValidEmail},{selector:'.login-form input[name="login_pass"]',validate:function validate(cb,val){var result=loginModel.password(val);cb(result)},errorMessage:this.context.enterPass}]);$loginForm.submit(function(event){_this2.loginValidator.performCheck();if(_this2.loginValidator.areAll('valid')){return}event.preventDefault()})};Auth.prototype.registerForgotPasswordValidation=function registerForgotPasswordValidation($forgotPasswordForm){var _this3=this;this.forgotPasswordValidator=Object(__WEBPACK_IMPORTED_MODULE_3__common_nod__["a" /* default */])({submit:'.forgot-password-form input[type="submit"]'});this.forgotPasswordValidator.add([{selector:'.forgot-password-form input[name="email"]',validate:function validate(cb,val){var result=__WEBPACK_IMPORTED_MODULE_5__common_models_forms__["a" /* default */].email(val);cb(result)},errorMessage:this.context.useValidEmail}]);$forgotPasswordForm.submit(function(event){_this3.forgotPasswordValidator.performCheck();if(_this3.forgotPasswordValidator.areAll('valid')){return}event.preventDefault()})};Auth.prototype.registerNewPasswordValidation=function registerNewPasswordValidation(){var newPasswordForm='.new-password-form';var newPasswordValidator=Object(__WEBPACK_IMPORTED_MODULE_3__common_nod__["a" /* default */])({submit:__WEBPACK_IMPORTED_MODULE_2_jquery___default()(newPasswordForm+' input[type="submit"]')});var passwordSelector=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(newPasswordForm+' input[name="password"]');var password2Selector=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(newPasswordForm+' input[name="password_confirm"]');__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["a" /* Validators */].setPasswordValidation(newPasswordValidator,passwordSelector,password2Selector,this.passwordRequirements)};Auth.prototype.registerCreateAccountValidator=function registerCreateAccountValidator($createAccountForm){var validationModel=Object(__WEBPACK_IMPORTED_MODULE_4__common_form_validation__["a" /* default */])($createAccountForm);var createAccountValidator=Object(__WEBPACK_IMPORTED_MODULE_3__common_nod__["a" /* default */])({submit:this.formCreateSelector+' input[type=\'submit\']'});var $stateElement=__WEBPACK_IMPORTED_MODULE_2_jquery___default()('[data-field-type="State"]');var emailSelector=this.formCreateSelector+' [data-field-type=\'EmailAddress\']';var $emailElement=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(emailSelector);var passwordSelector=this.formCreateSelector+' [data-field-type=\'Password\']';var $passwordElement=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(passwordSelector);var password2Selector=this.formCreateSelector+' [data-field-type=\'ConfirmPassword\']';var $password2Element=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(password2Selector);createAccountValidator.add(validationModel);if($stateElement){var $last=void 0;// Requests the states for a country with AJAX
Object(__WEBPACK_IMPORTED_MODULE_1__common_state_country__["a" /* default */])($stateElement,this.context,function(err,field){if(err){throw new Error(err)}var $field=__WEBPACK_IMPORTED_MODULE_2_jquery___default()(field);if(createAccountValidator.getStatus($stateElement)!=='undefined'){createAccountValidator.remove($stateElement)}if($last){createAccountValidator.remove($last)}if($field.is('select')){$last=field;__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["a" /* Validators */].setStateCountryValidation(createAccountValidator,field)}else{__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["a" /* Validators */].cleanUpStateValidation(field)}})}if($emailElement){createAccountValidator.remove(emailSelector);__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["a" /* Validators */].setEmailValidation(createAccountValidator,emailSelector)}if($passwordElement&&$password2Element){createAccountValidator.remove(passwordSelector);createAccountValidator.remove(password2Selector);__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["a" /* Validators */].setPasswordValidation(createAccountValidator,passwordSelector,password2Selector,this.passwordRequirements)}$createAccountForm.submit(function(event){createAccountValidator.performCheck();if(createAccountValidator.areAll('valid')){return}event.preventDefault()})};/**
     * Request is made in this function to the remote endpoint and pulls back the states for country.
     * @param next
     */Auth.prototype.loaded=function loaded(next){var $createAccountForm=Object(__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["b" /* classifyForm */])(this.formCreateSelector);var $loginForm=Object(__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["b" /* classifyForm */])('.login-form');var $forgotPasswordForm=Object(__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["b" /* classifyForm */])('.forgot-password-form');var $newPasswordForm=Object(__WEBPACK_IMPORTED_MODULE_6__common_form_utils__["b" /* classifyForm */])('.new-password-form');// reset password
// Injected via auth.html
this.passwordRequirements=this.context.passwordRequirements;if($loginForm.length){this.registerLoginValidation($loginForm)}if($newPasswordForm.length){this.registerNewPasswordValidation()}if($forgotPasswordForm.length){this.registerForgotPasswordValidation($forgotPasswordForm)}if($createAccountForm.length){this.registerCreateAccountValidator($createAccountForm)}next()};return Auth}(__WEBPACK_IMPORTED_MODULE_0__page_manager__["a" /* default */]);/* harmony default export */ __webpack_exports__["default"] = (Auth);

/***/ })

});
//# sourceMappingURL=theme-bundle.chunk.16.js.map
{"version":3,"sources":["webpack:///./assets/js/theme/brand.js"],"names":["Brand","loaded","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","showMoreProducts","$productListingContainer","$facetedSearchContainer","productsPerPage","context","brandProductsPerPage","requestOptions","template","productListing","sidebar","config","shop_by_brand","brand","products","limit","showMore","facetedSearch","FacetedSearch","content","html","animate","scrollTop","console","log","event","preventDefault","nextPage","next","link","find","attr","addClass","ajax","type","url","replace","success","data","append","children","removeClass","blur","Number","text","haloAddOptionForProduct","CatalogPage"],"mappings":"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","file":"theme-bundle.chunk.2.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\r\nimport CatalogPage from './catalog';\r\nimport $ from 'jquery';\r\nimport FacetedSearch from './common/faceted-search';\r\n\r\nexport default class Brand extends CatalogPage {\r\n    loaded() {\r\n        if ($('#facetedSearch').length > 0) {\r\n            this.initFacetedSearch();\r\n        } else {\r\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\r\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\r\n        }\r\n        this.showMoreProducts();\r\n\r\n    }\r\n\r\n    initFacetedSearch() {\r\n        const $productListingContainer = $('#product-listing-container');\r\n        const $facetedSearchContainer = $('#faceted-search-container');\r\n        const productsPerPage = this.context.brandProductsPerPage;\r\n        const requestOptions = {\r\n            template: {\r\n                productListing: 'brand/product-listing',\r\n                sidebar: 'brand/sidebar',\r\n            },\r\n            config: {\r\n                shop_by_brand: true,\r\n                brand: {\r\n                    products: {\r\n                        limit: productsPerPage,\r\n                    },\r\n                },\r\n            },\r\n            showMore: 'brand/show-more',\r\n        };\r\n\r\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\r\n            $productListingContainer.html(content.productListing);\r\n            $facetedSearchContainer.html(content.sidebar);\r\n            this.showMoreProducts();\r\n            $('html, body').animate({\r\n                scrollTop: 0,\r\n            }, 100);\r\n        });\r\n    }\r\n    showMoreProducts() {\r\n        const context = this.context;\r\n        console.log('hi')\r\n\r\n        $('#listing-showmoreBtn').on('click', (event) => {\r\n            event.preventDefault();\r\n            console.log('hi')\r\n            var nextPage = $(\".pagination-item--current\").next(),\r\n                link = nextPage.find(\"a\").attr(\"href\");\r\n\r\n            $('#listing-showmoreBtn').addClass('loading');\r\n\r\n            $.ajax({\r\n                type: 'get',\r\n                url: link.replace(\"http://\", \"//\"),\r\n                success: function(data) {\r\n                    if ($(data).find('#product-listing-container .productGrid').length > 0) {\r\n                        $('#product-listing-container .productGrid').append($(data).find('#product-listing-container .productGrid').children());\r\n\r\n                        $('.pagination-list').html($(data).find(\".pagination-list\").html());\r\n\r\n                        $('#listing-showmoreBtn').removeClass('loading').blur();\r\n\r\n                        if (Number($(data).find('.pagination-info .end').text()) <= Number($(data).find('.pagination-info .total').text())) {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .end').text());\r\n                        } else {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .total').text());\r\n                        }\r\n\r\n                        nextPage = $(\".pagination-item--current\").next();\r\n\r\n                        if (nextPage.length === 0) {\r\n                            $('#listing-showmoreBtn').addClass('disable').text('No more products');\r\n                        }\r\n\r\n                        if($(data).find('#product-listing-container .product').length > 0){\r\n                            haloAddOptionForProduct(context, 'product-listing-container');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/brand.js"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./assets/js/theme/category.js"],"names":["Category","loaded","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","showMoreProducts","$productListingContainer","$facetedSearchContainer","productsPerPage","context","categoryProductsPerPage","requestOptions","config","category","shop_by_price","products","limit","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","html","animate","scrollTop","event","preventDefault","nextPage","next","link","find","attr","addClass","ajax","type","url","replace","success","data","append","children","removeClass","blur","Number","text","CatalogPage"],"mappings":"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","file":"theme-bundle.chunk.15.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\r\nimport CatalogPage from './catalog';\r\nimport $ from 'jquery';\r\nimport FacetedSearch from './common/faceted-search';\r\n\r\nexport default class Category extends CatalogPage {\r\n    loaded() {\r\n        if ($('#facetedSearch').length > 0) {\r\n            this.initFacetedSearch();\r\n        } else {\r\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\r\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\r\n        }\r\n        this.showMoreProducts();\r\n    }\r\n\r\n    initFacetedSearch() {\r\n        const $productListingContainer = $('#product-listing-container');\r\n        const $facetedSearchContainer = $('#faceted-search-container');\r\n        const productsPerPage = this.context.categoryProductsPerPage;\r\n        const requestOptions = {\r\n            config: {\r\n                category: {\r\n                    shop_by_price: true,\r\n                    products: {\r\n                        limit: productsPerPage,\r\n                    },\r\n                },\r\n            },\r\n            template: {\r\n                productListing: 'category/product-listing',\r\n                sidebar: 'category/sidebar',\r\n            },\r\n            showMore: 'category/show-more',\r\n        };\r\n\r\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\r\n            $productListingContainer.html(content.productListing);\r\n            $facetedSearchContainer.html(content.sidebar);\r\n            this.showMoreProducts();\r\n            $('html, body').animate({\r\n                scrollTop: 0,\r\n            }, 100);\r\n        });\r\n    }\r\n    showMoreProducts() {\r\n        const context = this.context;\r\n\r\n        $('.button--showmore').on('click', (event) => {\r\n            event.preventDefault();\r\n            var nextPage = $(\".pagination-item--current\").next(),\r\n                link = nextPage.find(\"a\").attr(\"href\");\r\n            $('#listing-showmoreBtn > a').addClass('loading');\r\n\r\n            $.ajax({\r\n                type: 'get',\r\n                url: link.replace(\"http://\", \"//\"),\r\n                success: function(data) {\r\n                    if ($(data).find('#product-listing-container .productGrid').length > 0) {\r\n                        \r\n                        $('#product-listing-container .productGrid').append($(data).find('#product-listing-container .productGrid').children());\r\n\r\n                        $('.pagination-list').html($(data).find(\".pagination-list\").html());\r\n\r\n                        $('#listing-showmoreBtn > a').removeClass('loading').blur();\r\n\r\n                        if (Number($(data).find('.pagination-info .end').text()) <= Number($(data).find('.pagination-info .total').text())) {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .end').text());\r\n                        } else {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .total').text());\r\n                        }\r\n\r\n                        nextPage = $(\".pagination-item--current\").next();\r\n\r\n                        if (nextPage.length === 0) {\r\n                            $('#listing-showmoreBtn').addClass('pagination-disable button ').text('No More Products');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/category.js"],"sourceRoot":""}